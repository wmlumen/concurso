<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Repositorio Documentos - DocentePy</title>
<style>
  body { font-family: Arial, sans-serif; padding: 1rem; background: #f9f9f9; }
  .badge {
    padding: 0.2em 0.5em;
    border-radius: 4px;
    color: white;
    font-weight: bold;
    font-size: 0.8rem;
    text-transform: uppercase;
  }
  .activo { background-color: #27ae60; }
  .cerrado { background-color: #c0392b; }
  .reabierto { background-color: #e67e22; }
  .desierto { background-color: #7f8c8d; }

  .acordion-section {
    border: 1px solid #ccc;
    margin: 1rem 0;
    border-radius: 6px;
    background: white;
  }
  .acordion-header {
    cursor: pointer;
    padding: 0.5rem 1rem;
    font-weight: bold;
    background: #3498db;
    color: white;
    user-select: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .acordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    padding: 0 1rem;
  }
  .acordion-content.open {
    padding: 1rem;
    max-height: 1000px; /* bastante para contenido */
  }

  a.document-link {
    display: block;
    margin-bottom: 0.5rem;
    text-decoration: none;
    color: #2980b9;
  }

  a.document-link:hover {
    text-decoration: underline;
  }

  #toggleView {
    margin-bottom: 1rem;
    cursor: pointer;
    background: #2980b9;
    border: none;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>Repositorio Documentos - DocentePy</h1>

<button id="toggleView">Mostrar todos los documentos</button>

<div id="repositorio"></div>

<script>
  // Datos simulados
  const documentosRepositorio = {
    publico: {
      convocatoria: [
        { codigo: 'PUB-CONV-001', nombre: 'Convocatoria General 2025', enlace: '#', estado: 'Activo' },
        { codigo: 'PUB-CONV-002', nombre: 'Convocatoria Extraordinaria', enlace: '#', estado: 'Cerrado' },
        { codigo: 'PUB-CONV-003', nombre: 'Convocatoria Especial Región Norte', enlace: '#', estado: 'Re abierto' },
        { codigo: 'PUB-CONV-004', nombre: 'Convocatoria Anticipada Zona Sur', enlace: '#', estado: 'Desierto' },
      ],
      mejores: [
        { codigo: 'PUB-MEJ-001', nombre: 'Ranking Mejores Posicionados 2025', enlace: '#', estado: 'Activo' },
        { codigo: 'PUB-MEJ-002', nombre: 'Listado Destacados Concurso 2024', enlace: '#', estado: 'Cerrado' },
      ],
      ganadores: [
        { codigo: 'PUB-GAN-001', nombre: 'Ganadores Concurso General 2024', enlace: '#', estado: 'Activo' },
        { codigo: 'PUB-GAN-002', nombre: 'Ganadores Concurso Extraordinario 2023', enlace: '#', estado: 'Cerrado' },
      ],
    },
    privado: {
      convocatoria: [
        { codigo: 'PRI-CONV-001', nombre: 'Convocatoria Privada Institución A', enlace: '#', estado: 'Activo' },
        { codigo: 'PRI-CONV-002', nombre: 'Convocatoria Privada Institución B', enlace: '#', estado: 'Cerrado' },
      ],
      ganadores: [
        { codigo: 'PRI-GAN-001', nombre: 'Ganadores Privados Institución A', enlace: '#', estado: 'Activo' },
        { codigo: 'PRI-GAN-002', nombre: 'Ganadores Privados Institución B', enlace: '#', estado: 'Cerrado' },
      ],
    },
  };

  // Mapear estado a clase CSS para badge
  function claseEstado(estado) {
    switch (estado.toLowerCase()) {
      case 'activo': return 'activo';
      case 'cerrado': return 'cerrado';
      case 're abierto': return 'reabierto';
      case 'desierto': return 'desierto';
      default: return '';
    }
  }

  // Renderizar documentos según filtro
  function renderRepositorio(mostrarTodos) {
    const contenedor = document.getElementById('repositorio');
    contenedor.innerHTML = '';

    function crearAcordion(titulo, categoria, datos) {
      // Filtrar datos si no mostrarTodos
      const items = mostrarTodos ? datos : datos.filter(d => d.estado.toLowerCase() === 'activo');
      if (items.length === 0) return '';

      // Crear elementos acordeón
      const section = document.createElement('section');
      section.className = 'acordion-section';

      const header = document.createElement('div');
      header.className = 'acordion-header';
      header.textContent = titulo;

      // Icono para expandir/colapsar
      const icon = document.createElement('span');
      icon.textContent = '+';
      header.appendChild(icon);

      header.addEventListener('click', () => {
        content.classList.toggle('open');
        icon.textContent = content.classList.contains('open') ? '-' : '+';
      });

      const content = document.createElement('div');
      content.className = 'acordion-content';

      items.forEach(doc => {
        const a = document.createElement('a');
        a.href = doc.enlace;
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.className = 'document-link';
        a.textContent = `[${doc.codigo}] ${doc.nombre} `;
        
        // Badge estado
        const badge = document.createElement('span');
        badge.className = 'badge ' + claseEstado(doc.estado);
        badge.textContent = doc.estado;
        badge.style.marginLeft = '8px';

        a.appendChild(badge);
        content.appendChild(a);
      });

      section.appendChild(header);
      section.appendChild(content);
      contenedor.appendChild(section);
    }

    // Publico
    crearAcordion('Público - Convocatoria', 'publico-convocatoria', documentosRepositorio.publico.convocatoria);
    crearAcordion('Público - Mejores Posicionados', 'publico-mejores', documentosRepositorio.publico.mejores);
    crearAcordion('Público - Ganadores', 'publico-ganadores', documentosRepositorio.publico.ganadores);

    // Privado
    crearAcordion('Privado - Convocatoria', 'privado-convocatoria', documentosRepositorio.privado.convocatoria);
    crearAcordion('Privado - Ganadores', 'privado-ganadores', documentosRepositorio.privado.ganadores);
  }

  // Inicializar mostrando solo activos
  let mostrarTodos = false;
  renderRepositorio(mostrarTodos);

  // Botón toggle
  const toggleBtn = document.getElementById('toggleView');
  toggleBtn.addEventListener('click', () => {
    mostrarTodos = !mostrarTodos;
    renderRepositorio(mostrarTodos);
    toggleBtn.textContent = mostrarTodos ? 'Mostrar solo documentos activos' : 'Mostrar todos los documentos';
  });
</script>

</body>
</html>
